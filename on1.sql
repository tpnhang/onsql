create database quanlyphanhoi
use quanlyphanhoi

create table NHAPT(
MANPT char(4) primary key,
TENNPT varchar(50),
NGDK date,
SOUD INT(3)
);
 
CREATE TABLE NGUOIDUNG(
MAND CHAR(5) PRIMARY KEY,
TENND VARCHAR(50),
NGDKTV DATE,
GIOITINH VARCHAR(3),
NGSINH DATE
)

CREATE TABLE UNGDUNG(
MAUD CHAR (5) PRIMARY KEY,
TENUD VARCHAR(50),
MANPT VARCHAR(50),
NGPH DATE,
DLUONG DECIMAL(10,2),
LOAIUD VARCHAR(50)
)
ALTER TABLE UNGDUNG ADD CONSTRAINT FK_UNGDUNG_MANPT FOREIGN KEY (MANPT) REFERENCES NHAPT(MANPT)

CREATE TABLE GHINHAN(
MAUD CHAR (5),
MAND CHAR(5),
DANHGIA INT(1),
DANGSD BOOLEAN
)

ALTER TABLE GHINHAN ADD CONSTRAINT FK_GHINHAN_MAUD FOREIGN KEY (MAUD) REFERENCES UNGDUNG(MAUD)
ALTER TABLE GHINHAN ADD CONSTRAINT FK_GHINHAN_MAND FOREIGN KEY (MAND) REFERENCES NGUOIDUNG(MAND)

INSERT INTO NHAPT VALUES ('N001', 'Gameloft', '2006/06/20', 100);
INSERT INTO NHAPT VALUES ('N002', 'Ketchapp', '2010/07/18', 20);
INSERT INTO NHAPT VALUES ('N003', 'Facebook', '2006/02/27', 20);

INSERT INTO NGUOIDUNG VALUES ('ND001', 'Huynh Cong Khanh', '2009/06/17', 'Nam', '1994/08/25');
INSERT INTO NGUOIDUNG VALUES ('ND002', 'Nguyen Minh Dat', '2010/06/19', 'Nam', '1993/03/22');
INSERT INTO NGUOIDUNG VALUES ('ND003', 'Ho Quy Han', '2012/10/15', 'Nu', '1994/02/14');

INSERT INTO UNGDUNG VALUES ('UD001', 'Messenger', 'N001', '2017/02/01', 6.5, 'Chat');
INSERT INTO UNGDUNG VALUES ('UD002', 'Slack', 'N002', '2017/06/02', 0.2, 'Game');
INSERT INTO UNGDUNG VALUES ('UD003', 'Asphalt 8', 'N001', '2018/08/12', 1700, 'Game');

SET SQL_SAFE_UPDATES = 0;
DELETE FROM UNGDUNG
INSERT INTO UNGDUNG VALUES ('UD001', 'Messenger', 'N003', '2017/02/01', 6.5, 'Chat');
INSERT INTO UNGDUNG VALUES ('UD002', 'Slack', 'N002', '2017/06/02', 0.2, 'Game');
INSERT INTO UNGDUNG VALUES ('UD003', 'Asphalt 8', 'N001', '2018/08/12', 1700, 'Game');

INSERT INTO GHINHAN VALUES ('UD001', 'ND001', 5, 1);
INSERT INTO GHINHAN VALUES ('UD002', 'ND002', 4, 1);
INSERT INTO GHINHAN VALUES ('UD003', 'ND003', 4, 1);


